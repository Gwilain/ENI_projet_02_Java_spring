<!DOCTYPE html>
<html lang="fr"
	  th:replace="~{layouts/layout :: layout-enchere(titrePage=~{:: title}, contenuPage=~{:: main}, ressourcesSupp=~{:: js-filtre}, scriptsJs=~{:: js-filtre})}"
	  xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">


<head>

<title th:text="#{index.title}">page index</title>



</head>

<body>
	<main>
		<div class="content">
			<h2 data-th-text="#{index.h2}"></h2>
			<div class="center">
				<form class="filterForm" method="get" th:action="@{/}">


<!--					<input class="rightStraight" id="contient" name="contient" th:value="${contient}" th:placeholder="${contient} ?: #{index.nomContient}" />-->
					<input class="rightStraight" id="contient" name="contient" th:value="${contient}" th:placeholder="${contient} ?: #{index.nomContient}" />


					<select class="leftStraight" name="categorieId" id="categorie">
						<option value="" th:selected="${selectedCategorieId == null}" data-th-text="#{index.toutesCat}"></option>
						<option th:each="cat : ${categories}"
								th:value="${cat.id}"
								th:text="${cat.libelle}"
								th:selected="${cat.id == selectedCategorieId}">
						</option>
					</select>

					<button class="btnIcon" type="submit">
						<img class="search" th:src="@{/images/search.svg}" alt="Rechercher" />
					</button>

					<button class="btnIcon hidden" type="button" id="resetBtn">
						<img id="resetBtnImg" class="close hidden" th:src="@{/images/close.svg}" alt="RÃ©initialiser" />
					</button>
				</form>
			</div>

			<div sec:authorize="isAuthenticated()" class="btnsAchatVente">
				<div class="colSelectIndex">
				<a th:if="${!isAchat}" class="btnAchatVente" th:href="@{/encheres}" th:text="#{index.achats}"></a>
				<span th:if="${isAchat}" class="btnAchatVente" th:text="#{index.achats}"></span>


					<select name="typeEnchere" id="typeEnchere"
							th:attr="onchange=|window.location.href='@{/}?typeEnchere=' + this.value
                + (${selectedCategorieId != null} ? '&categorieId=' + ${selectedCategorieId} : '')
                + (${contient != null} ? '&contient=' + ${contient} : '')|">

						<option value="0" th:selected="${typeEnchere != null && typeEnchere == 0}" th:text="#{index.typeEnchere.ouverte}"></option>
						<option value="1" th:selected="${typeEnchere != null && typeEnchere == 1}" th:text="#{index.typeEnchere.enCours}"></option>
						<option value="2" th:selected="${typeEnchere != null && typeEnchere == 2}" th:text="#{index.typeEnchere.remportees}"></option>
					</select>

				</div>


				<a class="btnAchatVente inactive"  href="articles/ventes" th:text="#{index.mesVentes}"></a>
			</div>

			<section>
				<ul class="articleContainer">
					<li class="articleCards" data-th-each="article : ${articles}">
						<h3 data-th-text="${article.nom }"></h3>
<!--						<p th:text="#{article.dateDebut} + ' ' +${article.prixVente != null ? article.prixVente : article.prixInitial}"></p>-->

						<p data-th-text="#{article.dateFin} + ' ' +${@dateUtil.format(article.dateFinEncheres, 'dd/MM/yyyy')}"></p>
						<span data-th-text="#{article.vendeur}"></span><a th:href="@{/utilisateur/profil(pseudo=${article.vendeur.pseudo})}" data-th-text="${article.vendeur.pseudo}"></a>

					</li>
				</ul>

			</section>
		</div>
	</main>

	<th:block id="js-filtre" th:fragment="js-filtre">
		<script th:src="@{/js/filtre.js}"></script>
	</th:block>
</body>

</html>